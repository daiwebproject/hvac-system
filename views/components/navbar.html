{{ define "navbar" }}
<div x-data="{ scrolled: false, mobileMenuOpen: false }" @scroll.window="scrolled = (window.pageYOffset > 20)"
    class="fixed top-0 w-full z-50 transition-all duration-500 ease-in-out font-sans border-b border-transparent"
    :class="scrolled ? 'bg-white/95 backdrop-blur-xl shadow-sm py-2 border-slate-100' : 'bg-transparent py-4 lg:py-6'">

    <div class="container mx-auto px-4">
        <div class="navbar min-h-[3.5rem] p-0 flex justify-between items-center">

            <!-- Logo Section -->
            <div class="flex-shrink-0 flex items-center gap-3">
                <a href="/" class="group flex items-center gap-3 transition-all hover:opacity-90">
                    {{ if and .Settings .Settings.Logo }}
                    <img src="/api/files/settings/{{.Settings.Id}}/{{.Settings.Logo}}" alt="{{.Settings.CompanyName}}"
                        class="h-10 w-auto object-contain transition-transform duration-300 group-hover:scale-105">
                    {{ else }}
                    <div
                        class="w-10 h-10 rounded-xl bg-gradient-to-br from-blue-600 to-cyan-400 flex items-center justify-center text-white shadow-lg shadow-blue-500/30 group-hover:scale-110 transition-transform duration-300">
                        <i class="fa-solid fa-snowflake text-xl animate-pulse-slow"></i>
                    </div>
                    {{ end }}

                    <div class="flex flex-col leading-none">
                        <span
                            class="text-lg md:text-xl font-extrabold uppercase tracking-tight transition-colors duration-300"
                            :class="scrolled || mobileMenuOpen ? 'text-slate-900' : 'text-white'">
                            {{if .Settings.CompanyName}}{{.Settings.CompanyName}}{{else}}Đại Điện Lạnh{{end}}
                        </span>
                        <span
                            class="text-[10px] md:text-xs font-bold uppercase tracking-widest mt-0.5 transition-colors duration-300"
                            :class="scrolled || mobileMenuOpen ? 'text-blue-600' : 'text-blue-200'">
                            Dịch vụ Kỹ thuật
                        </span>
                    </div>
                </a>
            </div>

            <!-- Desktop Menu -->
            <div class="hidden lg:flex items-center gap-10">
                <ul class="flex items-center gap-8 font-bold text-sm uppercase tracking-wider">
                    <li>
                        <a href="#services" class="relative py-2 group transition-colors duration-300"
                            :class="scrolled ? 'text-slate-600 hover:text-blue-600' : 'text-white/90 hover:text-white'">
                            Dịch vụ
                            <span
                                class="absolute bottom-0 left-0 w-0 h-0.5 bg-blue-500 transition-all duration-300 ease-out group-hover:w-full"></span>
                        </a>
                    </li>
                    <li>
                        <a href="#about" class="relative py-2 group transition-colors duration-300"
                            :class="scrolled ? 'text-slate-600 hover:text-blue-600' : 'text-white/90 hover:text-white'">
                            Về chúng tôi
                            <span
                                class="absolute bottom-0 left-0 w-0 h-0.5 bg-blue-500 transition-all duration-300 ease-out group-hover:w-full"></span>
                        </a>
                    </li>
                    <li>
                        <a href="#" onclick="alert('Tính năng đang phát triển')"
                            class="relative py-2 group transition-colors duration-300"
                            :class="scrolled ? 'text-slate-600 hover:text-blue-600' : 'text-white/90 hover:text-white'">
                            Tra cứu đơn
                            <span
                                class="absolute bottom-0 left-0 w-0 h-0.5 bg-blue-500 transition-all duration-300 ease-out group-hover:w-full"></span>
                        </a>
                    </li>
                </ul>
            </div>

            <!-- Right Actions -->
            <div class="flex items-center gap-3 sm:gap-6">
                <!-- Hotline (Desktop) -->
                <a href="tel:{{if .Settings.Hotline}}{{ .Settings.Hotline }}{{end}}"
                    class="hidden md:flex flex-col items-end group transition-colors duration-300"
                    :class="scrolled ? 'text-slate-800' : 'text-white'">
                    <div class="flex items-center gap-3">
                        <div class="w-9 h-9 rounded-full border flex items-center justify-center transition-colors duration-300"
                            :class="scrolled ? 'border-slate-200 text-blue-600 bg-blue-50 group-hover:bg-blue-600 group-hover:text-white' : 'border-white/30 text-white bg-white/10 group-hover:bg-white group-hover:text-blue-600'">
                            <i class="fa-solid fa-phone animate-tada"></i>
                        </div>
                        <div class="flex flex-col items-start leading-none">
                            <span class="text-[10px] uppercase font-bold opacity-70 mb-1">Hotline 24/7</span>
                            <span
                                class="font-black text-lg font-mono tracking-tight group-hover:text-blue-500 transition-colors">
                                {{if .Settings.Hotline}}{{ .Settings.Hotline }}{{else}}1900 xxxx{{end}}
                            </span>
                        </div>
                    </div>
                </a>

                <!-- Booking Button -->
                <a href="/book"
                    class="btn border-none text-white shadow-xl shadow-blue-500/30 rounded-full px-5 md:px-7 transition-all duration-300 hover:-translate-y-1 hover:shadow-blue-500/50 flex items-center gap-2"
                    :class="scrolled ? 'bg-blue-600 hover:bg-blue-700' : 'bg-white/20 hover:bg-white/30 backdrop-blur-md border border-white/30'">
                    <i class="fa-solid fa-calendar-check"></i>
                    <span class="hidden sm:inline font-bold">ĐẶT LỊCH</span>
                </a>

                <!-- Mobile Menu Button -->
                <button @click="mobileMenuOpen = !mobileMenuOpen"
                    class="btn btn-ghost btn-circle lg:hidden transition-colors duration-300 relative z-50"
                    :class="(scrolled || mobileMenuOpen) ? 'text-slate-800 hover:bg-slate-100' : 'text-white hover:bg-white/20'">
                    <i class="fa-solid text-xl transition-transform duration-300"
                        :class="mobileMenuOpen ? 'fa-xmark rotate-90' : 'fa-bars'"></i>
                </button>
            </div>
        </div>
    </div>

    <!-- Mobile Menu Overlay -->
    <div x-show="mobileMenuOpen" x-transition:enter="transition ease-out duration-300"
        x-transition:enter-start="opacity-0 -translate-y-4" x-transition:enter-end="opacity-100 translate-y-0"
        x-transition:leave="transition ease-in duration-200" x-transition:leave-start="opacity-100 translate-y-0"
        x-transition:leave-end="opacity-0 -translate-y-4" @click.outside="mobileMenuOpen = false"
        class="absolute top-0 left-0 w-full bg-white shadow-2xl border-b border-gray-100 lg:hidden overflow-hidden pb-6 pt-24 rounded-b-3xl z-40">

        <div class="container mx-auto px-6 space-y-2">
            <a href="#services" @click="mobileMenuOpen = false"
                class="flex items-center gap-4 p-4 rounded-2xl hover:bg-blue-50 text-slate-600 hover:text-blue-600 font-bold text-lg transition-all group">
                <div
                    class="w-10 h-10 rounded-xl bg-blue-100 text-blue-600 flex items-center justify-center group-hover:scale-110 transition-transform">
                    <i class="fa-solid fa-wrench"></i>
                </div>
                Dịch vụ
            </a>

            <a href="#about" @click="mobileMenuOpen = false"
                class="flex items-center gap-4 p-4 rounded-2xl hover:bg-blue-50 text-slate-600 hover:text-blue-600 font-bold text-lg transition-all group">
                <div
                    class="w-10 h-10 rounded-xl bg-blue-100 text-blue-600 flex items-center justify-center group-hover:scale-110 transition-transform">
                    <i class="fa-solid fa-info"></i>
                </div>
                Về chúng tôi
            </a>

            <div class="border-t border-dashed border-gray-200 my-4"></div>

            <a href="tel:{{if .Settings.Hotline}}{{ .Settings.Hotline }}{{end}}"
                class="flex items-center justify-center gap-3 p-4 rounded-2xl bg-gradient-to-r from-blue-600 to-blue-500 text-white font-bold text-lg shadow-lg shadow-blue-500/30 active:scale-95 transition-transform">
                <i class="fa-solid fa-phone-volume animate-pulse"></i>
                {{if .Settings.Hotline}}GỌI {{ .Settings.Hotline }}{{else}}GỌI HOTLINE{{end}}
            </a>
        </div>
    </div>
</div>
{{ end }}